2024-12-16 20:26:09.953 +03:00 [INF] Executed DbCommand (151ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE "TeledockDB" WITH (FORCE);
2024-12-16 20:26:10.055 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "TeledockDB";
2024-12-16 20:26:10.137 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Users" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Email" text NOT NULL,
    "Password" text NOT NULL,
    "Salt" text NOT NULL,
    "PhoneNumber" text,
    "Role" text NOT NULL,
    "Created" timestamp with time zone NOT NULL,
    "LastModified" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_Users" PRIMARY KEY ("Id")
);
2024-12-16 20:26:10.143 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Profiles" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "FirstName" text NOT NULL,
    "LastName" text NOT NULL,
    "Age" integer NOT NULL,
    "Gender" text NOT NULL,
    "About" text NOT NULL,
    "CurrentAvatar" text NOT NULL,
    "LastActivity" timestamp with time zone NOT NULL,
    "Status" integer NOT NULL,
    "UserId" integer NOT NULL,
    "Created" timestamp with time zone NOT NULL,
    "LastModified" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_Profiles" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Profiles_Users_UserId" FOREIGN KEY ("UserId") REFERENCES "Users" ("Id") ON DELETE CASCADE
);
2024-12-16 20:26:10.146 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Profiles_UserId" ON "Profiles" ("UserId");
2024-12-16 20:26:10.207 +03:00 [INF] User profile is available. Using 'C:\Users\homya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-12-16 20:26:10.276 +03:00 [INF] Now listening on: http://localhost:5298
2024-12-16 20:26:10.314 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-12-16 20:26:10.315 +03:00 [INF] Hosting environment: Development
2024-12-16 20:26:10.316 +03:00 [INF] Content root path: X:\YandexDisk\source\repos\Meetya\User.API\User.Web
2024-12-16 20:26:11.441 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/ - null null
2024-12-16 20:26:11.533 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/ - 301 0 null 93.5731ms
2024-12-16 20:26:11.540 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/index.html - null null
2024-12-16 20:26:11.583 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/index.html - 200 null text/html;charset=utf-8 43.2804ms
2024-12-16 20:26:11.607 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/swagger-ui.css - null null
2024-12-16 20:26:11.608 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/index.css - null null
2024-12-16 20:26:11.610 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/swagger-ui-bundle.js - null null
2024-12-16 20:26:11.611 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/swagger-ui-standalone-preset.js - null null
2024-12-16 20:26:11.611 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/index.js - null null
2024-12-16 20:26:11.611 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/_framework/aspnetcore-browser-refresh.js - null null
2024-12-16 20:26:11.616 +03:00 [INF] Sending file. Request path: '/index.css'. Physical path: 'N/A'
2024-12-16 20:26:11.620 +03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2024-12-16 20:26:11.620 +03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2024-12-16 20:26:11.623 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/index.js - 200 null application/javascript;charset=utf-8 11.5898ms
2024-12-16 20:26:11.623 +03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2024-12-16 20:26:11.626 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 15.0348ms
2024-12-16 20:26:11.626 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/index.css - 200 202 text/css 18.2167ms
2024-12-16 20:26:11.629 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/swagger-ui.css - 200 152035 text/css 21.6028ms
2024-12-16 20:26:11.630 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/swagger-ui-standalone-preset.js - 200 230007 text/javascript 18.8389ms
2024-12-16 20:26:11.635 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/swagger-ui-bundle.js - 200 1426050 text/javascript 24.8287ms
2024-12-16 20:26:11.651 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/_vs/browserLink - null null
2024-12-16 20:26:11.687 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/_vs/browserLink - 200 null text/javascript; charset=UTF-8 35.7538ms
2024-12-16 20:26:11.818 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/swagger/v1/swagger.json - null null
2024-12-16 20:26:11.828 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.6605ms
2024-12-16 20:26:11.840 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/favicon-32x32.png - null null
2024-12-16 20:26:11.843 +03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2024-12-16 20:26:11.844 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/favicon-32x32.png - 200 628 image/png 4.3669ms
2024-12-16 20:26:18.644 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5298/api/User/register - application/json 47
2024-12-16 20:26:18.664 +03:00 [INF] Executing endpoint 'Users.Web.Controllers.UserController.Register (Users.Web)'
2024-12-16 20:26:18.677 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(Users.Application.Models.RegDto) on controller Users.Web.Controllers.UserController (Users.Web).
2024-12-16 20:26:18.918 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Created", u."Email", u."LastModified", u."Password", u."PhoneNumber", u."Role", u."Salt"
FROM "Users" AS u
WHERE u."Email" = @__email_0
LIMIT 2
2024-12-16 20:26:19.043 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?' (DbType = DateTime), @p3='?', @p4='?', @p5='?', @p6='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Users" ("Created", "Email", "LastModified", "Password", "PhoneNumber", "Role", "Salt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6)
RETURNING "Id";
2024-12-16 20:26:19.090 +03:00 [INF] Executing OkObjectResult, writing value of type 'Users.Application.Models.AfterAuthDto'.
2024-12-16 20:26:19.095 +03:00 [INF] Executed action Users.Web.Controllers.UserController.Register (Users.Web) in 414.3767ms
2024-12-16 20:26:19.097 +03:00 [INF] Executed endpoint 'Users.Web.Controllers.UserController.Register (Users.Web)'
2024-12-16 20:26:19.101 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5298/api/User/register - 200 null application/json; charset=utf-8 457.3931ms
2024-12-16 20:26:41.706 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/api/Test/public - null null
2024-12-16 20:26:41.710 +03:00 [INF] Executing endpoint 'Users.Web.Controllers.TestController.Public (Users.Web)'
2024-12-16 20:26:41.712 +03:00 [INF] Route matched with {action = "Public", controller = "Test"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Public() on controller Users.Web.Controllers.TestController (Users.Web).
2024-12-16 20:26:41.715 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-12-16 20:26:41.716 +03:00 [INF] Executed action Users.Web.Controllers.TestController.Public (Users.Web) in 2.1146ms
2024-12-16 20:26:41.717 +03:00 [INF] Executed endpoint 'Users.Web.Controllers.TestController.Public (Users.Web)'
2024-12-16 20:26:41.719 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/api/Test/public - 200 null text/plain; charset=utf-8 13.1502ms
2024-12-16 20:26:45.769 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/api/Test/protected - null null
2024-12-16 20:26:45.776 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-12-16 20:26:45.779 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-12-16 20:26:45.780 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/api/Test/protected - 401 0 null 11.7305ms
2024-12-16 20:26:53.896 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/api/Test/protected - null null
2024-12-16 20:26:53.902 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-12-16 20:26:53.903 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-12-16 20:26:53.905 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/api/Test/protected - 401 0 null 9.1223ms
2024-12-16 20:27:06.990 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/api/Test/protected - null null
2024-12-16 20:27:07.017 +03:00 [INF] Executing endpoint 'Users.Web.Controllers.TestController.Protected (Users.Web)'
2024-12-16 20:27:07.019 +03:00 [INF] Route matched with {action = "Protected", controller = "Test"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Protected() on controller Users.Web.Controllers.TestController (Users.Web).
2024-12-16 20:27:07.021 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-12-16 20:27:07.022 +03:00 [INF] Executed action Users.Web.Controllers.TestController.Protected (Users.Web) in 1.4207ms
2024-12-16 20:27:07.023 +03:00 [INF] Executed endpoint 'Users.Web.Controllers.TestController.Protected (Users.Web)'
2024-12-16 20:27:07.024 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/api/Test/protected - 200 null text/plain; charset=utf-8 34.7399ms
2024-12-16 20:27:12.381 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/api/Test/admin - null null
2024-12-16 20:27:12.385 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-12-16 20:27:12.386 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-12-16 20:27:12.387 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/api/Test/admin - 403 0 null 6.905ms
2024-12-16 20:27:29.103 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5298/api/Profile/add - application/json 298
2024-12-16 20:27:29.106 +03:00 [INF] Executing endpoint 'Users.Web.Controllers.ProfileController.AddProfile (Users.Web)'
2024-12-16 20:27:29.111 +03:00 [INF] Route matched with {action = "AddProfile", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddProfile(Users.Domain.Entities.Profile) on controller Users.Web.Controllers.ProfileController (Users.Web).
2024-12-16 20:27:29.189 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?', @p4='?', @p5='?', @p6='?' (DbType = DateTime), @p7='?' (DbType = DateTime), @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Profiles" ("About", "Age", "Created", "CurrentAvatar", "FirstName", "Gender", "LastActivity", "LastModified", "LastName", "Status", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10)
RETURNING "Id";
2024-12-16 20:27:29.193 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Int32'.
2024-12-16 20:27:29.196 +03:00 [INF] Executed action Users.Web.Controllers.ProfileController.AddProfile (Users.Web) in 82.9229ms
2024-12-16 20:27:29.197 +03:00 [INF] Executed endpoint 'Users.Web.Controllers.ProfileController.AddProfile (Users.Web)'
2024-12-16 20:27:29.199 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5298/api/Profile/add - 200 null application/json; charset=utf-8 95.9255ms
2024-12-16 20:27:40.598 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/api/Profile/1 - null null
2024-12-16 20:27:40.601 +03:00 [INF] Executing endpoint 'Users.Web.Controllers.ProfileController.GetProfileById (Users.Web)'
2024-12-16 20:27:40.605 +03:00 [INF] Route matched with {action = "GetProfileById", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfileById(Int32) on controller Users.Web.Controllers.ProfileController (Users.Web).
2024-12-16 20:27:40.624 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."About", p."Age", p."Created", p."CurrentAvatar", p."FirstName", p."Gender", p."LastActivity", p."LastModified", p."LastName", p."Status", p."UserId"
FROM "Profiles" AS p
WHERE p."Id" = @__p_0
LIMIT 1
2024-12-16 20:27:40.632 +03:00 [INF] Executing OkObjectResult, writing value of type 'Users.Domain.Entities.Profile'.
2024-12-16 20:27:40.636 +03:00 [INF] Executed action Users.Web.Controllers.ProfileController.GetProfileById (Users.Web) in 29.5922ms
2024-12-16 20:27:40.637 +03:00 [INF] Executed endpoint 'Users.Web.Controllers.ProfileController.GetProfileById (Users.Web)'
2024-12-16 20:27:40.638 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/api/Profile/1 - 200 null application/json; charset=utf-8 40.6538ms
2024-12-16 20:27:48.657 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/api/Profile/user/1 - null null
2024-12-16 20:27:48.661 +03:00 [INF] Executing endpoint 'Users.Web.Controllers.ProfileController.GetProfilesByUserId (Users.Web)'
2024-12-16 20:27:48.665 +03:00 [INF] Route matched with {action = "GetProfilesByUserId", controller = "Profile"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetProfilesByUserId(Int32) on controller Users.Web.Controllers.ProfileController (Users.Web).
2024-12-16 20:27:48.678 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userid_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT p."Id", p."About", p."Age", p."Created", p."CurrentAvatar", p."FirstName", p."Gender", p."LastActivity", p."LastModified", p."LastName", p."Status", p."UserId"
FROM "Profiles" AS p
WHERE p."UserId" = @__userid_0
2024-12-16 20:27:48.680 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Users.Domain.Entities.Profile, Users.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-12-16 20:27:48.682 +03:00 [INF] Executed action Users.Web.Controllers.ProfileController.GetProfilesByUserId (Users.Web) in 14.7957ms
2024-12-16 20:27:48.683 +03:00 [INF] Executed endpoint 'Users.Web.Controllers.ProfileController.GetProfilesByUserId (Users.Web)'
2024-12-16 20:27:48.685 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/api/Profile/user/1 - 200 null application/json; charset=utf-8 28.0344ms
