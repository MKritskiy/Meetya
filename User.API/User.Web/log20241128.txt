2024-11-28 00:01:10.053 +03:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP DATABASE "TeledockDB" WITH (FORCE);
2024-11-28 00:01:10.153 +03:00 [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE "TeledockDB";
2024-11-28 00:01:10.245 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Users" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "Email" text NOT NULL,
    "Password" text NOT NULL,
    "Salt" text NOT NULL,
    "PhoneNumber" text,
    "Role" text NOT NULL,
    "Created" timestamp with time zone NOT NULL,
    "LastModified" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_Users" PRIMARY KEY ("Id")
);
2024-11-28 00:01:10.322 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Profiles" (
    "Id" integer GENERATED BY DEFAULT AS IDENTITY,
    "FirstName" text NOT NULL,
    "LastName" text NOT NULL,
    "Age" integer NOT NULL,
    "Gender" text NOT NULL,
    "About" text NOT NULL,
    "CurrentAvatar" text NOT NULL,
    "LastActivity" timestamp with time zone NOT NULL,
    "Status" integer NOT NULL,
    "UserId" integer NOT NULL,
    "Created" timestamp with time zone NOT NULL,
    "LastModified" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_Profiles" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Profiles_Users_UserId" FOREIGN KEY ("UserId") REFERENCES "Users" ("Id") ON DELETE CASCADE
);
2024-11-28 00:01:10.326 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Profiles_UserId" ON "Profiles" ("UserId");
2024-11-28 00:01:10.392 +03:00 [INF] User profile is available. Using 'C:\Users\homya\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-11-28 00:01:10.442 +03:00 [INF] Now listening on: http://localhost:5298
2024-11-28 00:01:10.485 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-11-28 00:01:10.486 +03:00 [INF] Hosting environment: Development
2024-11-28 00:01:10.487 +03:00 [INF] Content root path: X:\YandexDisk\source\repos\Meetya\User.API\User.Web
2024-11-28 00:01:10.847 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/index.html - null null
2024-11-28 00:01:10.957 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/index.html - 200 null text/html;charset=utf-8 111.1139ms
2024-11-28 00:01:10.975 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/index.js - null null
2024-11-28 00:01:10.975 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/_vs/browserLink - null null
2024-11-28 00:01:10.976 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/_framework/aspnetcore-browser-refresh.js - null null
2024-11-28 00:01:10.979 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/index.js - 200 null application/javascript;charset=utf-8 3.9849ms
2024-11-28 00:01:10.985 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/_framework/aspnetcore-browser-refresh.js - 200 13770 application/javascript; charset=utf-8 8.588ms
2024-11-28 00:01:11.003 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/_vs/browserLink - 200 null text/javascript; charset=UTF-8 28.0988ms
2024-11-28 00:01:11.094 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/swagger/v1/swagger.json - null null
2024-11-28 00:01:11.109 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 14.2219ms
2024-11-28 00:01:29.799 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/api/Test/protected - null null
2024-11-28 00:01:29.862 +03:00 [INF] Executing endpoint 'Users.Web.Controllers.TestController.Protected (Users.Web)'
2024-11-28 00:01:29.869 +03:00 [INF] Route matched with {action = "Protected", controller = "Test"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Protected() on controller Users.Web.Controllers.TestController (Users.Web).
2024-11-28 00:01:29.874 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-11-28 00:01:29.878 +03:00 [INF] Executed action Users.Web.Controllers.TestController.Protected (Users.Web) in 4.8828ms
2024-11-28 00:01:29.879 +03:00 [INF] Executed endpoint 'Users.Web.Controllers.TestController.Protected (Users.Web)'
2024-11-28 00:01:29.880 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/api/Test/protected - 200 null text/plain; charset=utf-8 80.8294ms
2024-11-28 00:01:34.013 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/api/Test/admin - null null
2024-11-28 00:01:34.020 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-11-28 00:01:34.022 +03:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-11-28 00:01:34.023 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/api/Test/admin - 403 0 null 10.5907ms
2024-11-28 00:02:35.571 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/api/Test/admin - null null
2024-11-28 00:02:35.579 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'K8SdUjUwQ0hgJFiE9hsKscNYMfZLOD6wAosHZUtG8jA'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-11-28 00:02:35.587 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'K8SdUjUwQ0hgJFiE9hsKscNYMfZLOD6wAosHZUtG8jA'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2024-11-28 00:02:35.589 +03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2024-11-28 00:02:35.592 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-11-28 00:02:35.593 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/api/Test/admin - 401 0 null 21.5566ms
2024-11-28 00:02:44.524 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5298/api/Test/protected - null null
2024-11-28 00:02:44.527 +03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'K8SdUjUwQ0hgJFiE9hsKscNYMfZLOD6wAosHZUtG8jA'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-11-28 00:02:44.531 +03:00 [INF] Bearer was not authenticated. Failure message: IDX10517: Signature validation failed. The token's kid is missing. Keys tried: 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey, KeyId: '', InternalId: 'K8SdUjUwQ0hgJFiE9hsKscNYMfZLOD6wAosHZUtG8jA'. , KeyId: 
'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2024-11-28 00:02:44.532 +03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-11-28 00:02:44.533 +03:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-11-28 00:02:44.534 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5298/api/Test/protected - 401 0 null 10.7804ms
